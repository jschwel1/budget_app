{% extends 'budget/base.html' %}

{% block title %}Login{% endblock %}

{% block body %}
<h2> Login Page </h2>

<!-- Tab options -->
<div class="tab">
    <button class="tablinks {% if login %} active {% endif %}" onclick="openTab(event, 'login')" >Login</button>
    <button class="tablinks {% if register %} active {% endif %}" onclick="openTab(event, 'register')">Register</button>
</div>

<div class="tabcontent" id='login' {% if login %} style="display:block;" {% endif %}>
    <form method='POST' action="{% url 'budget:login' %}">
        {% csrf_token %}
        {% if error_msg  %}
        <div class='alert alert-danger'>
            Error: "{{error_msg}}"
        </div>
        {% endif %}
        <div class='row'>
            <div class='col-md-2'>
                <label> Username: </label>
            </div>
            <div class='col-md-2'>
                <input type='text' name='username' {% ifnotequal username '' %} value='{{username}}' {% endifnotequal %} required />
            </div>
        </div>
        <div class='row'>
            <div class='col-md-2'>
                <label> Password: </label>
            </div>
            <div class='col-md-2'>
                <input type='password' name='password' required />
            </div>
        </div>
        <div class='row'>
    		<div class='col-md-2'></div>
            <div class='col-md-1'>
                <input type='submit' name='login' value='login' style='width:100%'>
            </div>
        </div>
    </form>
</div>

<div class="tabcontent" id='register' {% if register %} style="display:block;" {% endif %}>
    <form method='POST' action="{% url 'budget:login' %}">
        {% csrf_token %}
        {% if error_msg  %}
        <div class='alert alert-danger'>
            Error: "{{error_msg}}"
        </div>
        {% endif %}
        <div class='row'>
            <div class='col-md-2'>
                <label> Username: </label>
            </div>
            <div class='col-md-2'>
                <input type='text' name='username' {% ifnotequal username '' %} value='{{username}}' {% endifnotequal %} required />
            </div>
        </div>
        <div class='row'>
            <div class='col-md-2'>
                <label> Password: </label>
            </div>
            <div class='col-md-2'>
                <input type='password' name='password' required />
            </div>
        </div>
        <div class='row'>
            <div class='col-md-2'>
                <label> Last name: </label>
            </div>
            <div class='col-md-2'>
                <input type='text' name='lastname' {%if lastname %} value="{{lastname}}"  {% endif %}required />
            </div>
        </div>
        <div class='row'>
            <div class='col-md-2'>
                <label> First name: </label>
            </div>
            <div class='col-md-2'>
                <input type='text' name='firstname' {%if firstname %} value="{{firstname}}" {% endif %} required />
            </div>
        </div>
        <div class='row'>
            <div class='col-md-2'>
                <label> Email: </label>
            </div>
            <div class='col-md-2'>
                <input type='email' name='email' {%if email %} value="{{email}}" {% endif %} required />
            </div>
        </div>
        <div class='row'>
    		<div class='col-md-2'></div>
            <div class='col-md-1'>
                <input type='submit' name='register' value='register' style='width:100%'>
            </div>
        </div>
    </form>
</div>



<script>
function openTab(evt, tabName) {
    var i, tabcontent, tablinks;
    tabcontent = document.getElementsByClassName("tabcontent");
    for (i = 0; i < tabcontent.length; i++) {
        tabcontent[i].style.display = "none";
    }
    tablinks = document.getElementsByClassName("tablinks");
    for (i = 0; i < tablinks.length; i++) {
        tablinks[i].className = tablinks[i].className.replace(" active", "");
    }
    document.getElementById(tabName).style.display = "block";
    evt.currentTarget.className += " active";
}
</script>
{% endblock %}

